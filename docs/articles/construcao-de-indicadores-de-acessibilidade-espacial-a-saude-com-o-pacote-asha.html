<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Construção de indicadores de acessibilidade espacial à saúde com o pacote asha • asha</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Construção de indicadores de acessibilidade espacial à saúde com o pacote asha">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">asha</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/construcao-de-indicadores-de-acessibilidade-espacial-a-saude-com-o-pacote-asha.html">Construção de indicadores de acessibilidade espacial à saúde com o pacote asha</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Construção de indicadores de acessibilidade espacial à saúde com o pacote asha</h1>
            <h3 class="subtitle">Exemplo a partir do caso da cidade de São Paulo</h3>
                        <h4 class="author">Bruno Pinheiro<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</h4>
            <address class="author_afil">
      Escola de Artes, Ciências e Humanidades da Universidade de São Paulo<br><a class="author_email" href="mailto:#"></a><a href="mailto:bruno.pinheiro.oliveira@usp.br">bruno.pinheiro.oliveira@usp.br</a>
      </address>
                              <h4 class="author">Alexandre Ribeiro Leichsenring<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
</h4>
            <address class="author_afil">
      Escola de Artes, Ciências e Humanidades da Universidade de São Paulo<br><a class="author_email" href="mailto:#"></a><a href="mailto:alexandre.leichsenring@usp.br">alexandre.leichsenring@usp.br</a>
      </address>
                  
            <h4 class="date">2019-04-05</h4>
      
      
      <div class="hidden name"><code>construcao-de-indicadores-de-acessibilidade-espacial-a-saude-com-o-pacote-asha.Rmd</code></div>

    </div>

    
    
<div id="introducao" class="section level1">
<h1 class="hasAnchor">
<a href="#introducao" class="anchor"></a>Introdução</h1>
<hr>
<p>bla bla bla…</p>
<p>Cada projeto de dados enfrenta desafios particulates. Fatores como a existência ou não dos dados, se o acesso é público, se os dados são estruturados ou não.</p>
<p>O problema abordado pela pesquisa foi o da relação entre o sistema municipal de atenção básica de saúde, sua organização territorial e a distribuição espacial da população. A pergunta norteadora central foi “como otimizar a acessibilidade espacial da atenção básica de saúde?”. Desta derivaram perguntas secundárias: “como avaliar a acessibilidade espacial da atenção básica de saúde?”, “quais os dados necessários, quais os dados existentes e que modelos poderiam ser utilizados?”, “dada a definição da metodologia, como viabilizar replicabilidade?”, “como lidar com a realidade de que a escassez de recursos imporá barreiras à redistribuição espacial de unidades de saúde?”, “como tornar o processo o menos custoso possível na interação com as API’s?”</p>
<p>Além das consultas à bibliografia, a resposta a estas perguntas envolveu um conjunto de procedimentos computacionais e estatísticos de complexidades variadas, no caso desta pesquisa realizados no R: manipulação de bases de dados espaciais, rotina de captura de informações espaciais usando as API’s do Google, criação de mapas e gráficos, geração de estatísticas descritivas e cálculo de indicadores de acessibilidade espacial.</p>
<p>Ao fim a metodologia foi encapsulada no pacote do R chamado <code>asha</code>. A proposta deste artigo é, por meio do relato do processo de investigação, de construção da metodologia e dos indicadores, apresentar de forma prática um exemplo de uso de dados públicos para a construção de uma ferramenta propositiva para o processo de produção de políticas públicas, incluindo os desafios enfrentados e as soluções que permitiram superá-los.</p>
<blockquote>
<p>“O Brasil já possui diversos casos práticos de publicação de dados na web: IBGE, Datasus, IPEA, INEP, Portal da Transparência, e muitos outros. Só que esses casos não estão aderentes às premissas dos dados abertos e da reusabilidade dos dados publicados, além de cada um fazer suas publicações em formatos e padrões diferentes.” (Miranda, p. 64)</p>
</blockquote>
<p><img src="imgs/candidates-for-bigdata.png"></p>
</div>
<div id="objetivos" class="section level1">
<h1 class="hasAnchor">
<a href="#objetivos" class="anchor"></a>Objetivos</h1>
</div>
<div id="estrutura-do-pacote-e-funcionalidade" class="section level1">
<h1 class="hasAnchor">
<a href="#estrutura-do-pacote-e-funcionalidade" class="anchor"></a>Estrutura do pacote e funcionalidade</h1>
<p>A instalação do pacote e carregado no ambiente do R conforme indicado a seguir:</p>
</div>
<div id="funcionalidades-centrais-do-asha" class="section level1">
<h1 class="hasAnchor">
<a href="#funcionalidades-centrais-do-asha" class="anchor"></a>Funcionalidades centrais do <code>asha</code>
</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span>(</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="op">~</span>Family, <span class="op">~</span>Function,</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">    <span class="st">"Obtenção de dados"</span>, <span class="st">"`get_zip()`, `get_censo()`"</span>,</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="st">"Estimação de origem-destino"</span>, <span class="st">"asha_nn(), asha_intersect()"</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    ),</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  <span class="dt">caption =</span> <span class="st">"Funcionalidades do pacote asha"</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">)</a></code></pre></div>
<table class="table">
<caption>Funcionalidades do pacote asha</caption>
<thead><tr class="header">
<th align="left">Family</th>
<th align="left">Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Obtenção de dados</td>
<td align="left">
<code><a href="../reference/get_zip.html">get_zip()</a></code>, <code><a href="../reference/get_censo.html">get_censo()</a></code>
</td>
</tr>
<tr class="even">
<td align="left">Estimação de origem-destino</td>
<td align="left">asha_nn(), asha_intersect()</td>
</tr>
</tbody>
</table>
</div>
<div id="passo-1-obtencao-dos-dados" class="section level1">
<h1 class="hasAnchor">
<a href="#passo-1-obtencao-dos-dados" class="anchor"></a>Passo 1: Obtenção dos dados</h1>
<div id="dados-fundamentais" class="section level2">
<h2 class="hasAnchor">
<a href="#dados-fundamentais" class="anchor"></a>Dados fundamentais</h2>
<p>A construção das medidas de acessibilidade disponíveis no pacote <code>asha</code> depende de um conjunto específico de dados a respeito do território, da população e dos serviços de saúde pública.</p>
<p>As bases de dados utilizadas na pesquisa realizada com dados da cidade de São Paulo estão incorporadas ao pacote e podem servir de exemplo para os dados que deverão ser obtidos para viabilizar a modelagem e construção dos indicadores. Para ver todos os dados disponíveis no pacote digite <code><a href="https://www.rdocumentation.org/packages/utils/topics/data">data(package = "asha")</a></code> no console`.</p>
<p>Especificamente, a pesquisa baseou-se nas seguintes bases de dados:</p>
<table class="table">
<caption>Characterization of study data, 2010-2017</caption>
<thead><tr class="header">
<th align="left">Information</th>
<th align="left">Source</th>
<th align="left">Period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Census tracts mesh</td>
<td align="left">Census 2010 (IBGE)</td>
<td align="left">2010</td>
</tr>
<tr class="even">
<td align="left">Habitants and income</td>
<td align="left">Census 1010 aggregated by tracts (IBGE)</td>
<td align="left">2010</td>
</tr>
<tr class="odd">
<td align="left">Location of primary care units</td>
<td align="left">GEOSAMPA/PMSP; CNES; Google Geocode API</td>
<td align="left">2015/2016</td>
</tr>
<tr class="even">
<td align="left">Health professionals</td>
<td align="left">CNES</td>
<td align="left">sep/2017</td>
</tr>
<tr class="odd">
<td align="left">Primary care units coverage mesh</td>
<td align="left">Information request at SMS/PMSP</td>
<td align="left">2017</td>
</tr>
<tr class="even">
<td align="left">Distances in length and travel time</td>
<td align="left">Google Distance Matrix API</td>
<td align="left">2017</td>
</tr>
</tbody>
</table>
<p>Após o <em>download</em> dos dados e da realização do pré-processamento foram definidas as seguintes bases de dados chave:</p>
<ul>
<li>
<code>setores</code>: malha de setores censitários</li>
<li>
<code>populacao</code>: habitantes e renda</li>
<li>
<code>ubs_pontos</code>: geolocalização das UBS</li>
<li>
<code>ubs_malhas</code>: malha dos territórios de UBS</li>
<li>
<code>prof_saude</code>: número de médicos e enfermeiros nas unidades de saúde de São Paulo</li>
</ul>
<p>A base de dados final, resultado da modelagem da estrutura de origem e destino e da construção dos indicadores é a <code>od_indicadores</code>, cuja estrutura é apresentada abaixo:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(asha)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(od_indicadores)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    37906 obs. of  17 variables:</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt;  $ cd_geocodi      : chr  "355030828000139" "355030828000163" "355030887000100" "355030887000101" ...</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;  $ cnes            : chr  "2819856" "2819856" "2819856" "2819856" ...</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;  $ malha           : Factor w/ 2 levels "vigente","experimento": 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;  $ habitantes      : num  0 21 972 394 380 ...</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;  $ homens          : int  NA 7 476 194 202 210 569 540 444 NA ...</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;  $ mulheres        : int  NA 14 496 200 178 214 604 542 480 NA ...</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;  $ renda_domicilios: chr  NA "12250" "322806" "134760" ...</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  $ enfermeiros     : int  8 8 8 8 8 8 8 8 8 8 ...</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  $ medicos         : int  5 5 5 5 5 5 5 5 5 5 ...</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  $ oportunidades   : int  13 13 13 13 13 13 13 13 13 13 ...</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  $ demanda         : num  23396 23396 23396 23396 23396 ...</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  $ distancia       : int  NA NA 825 129 894 7179 1551 1384 1472 1088 ...</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  $ tempo           : int  NA NA 611 95 657 5248 1134 1011 1056 778 ...</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  $ minutos         : num  NA NA 10.18 1.58 10.95 ...</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  $ av              : chr  NA NA "Sim" "Sim" ...</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  $ av_prop         : num  0.456 0.456 0.456 0.456 0.456 ...</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  $ ac              : num  0.556 0.556 0.556 0.556 0.556 ...</span></a></code></pre></div>
</div>
<div id="baixar-os-dados" class="section level2">
<h2 class="hasAnchor">
<a href="#baixar-os-dados" class="anchor"></a>Baixar os dados</h2>
<dl>
<dt>Problema</dt>
<dd><ul>
<li>Garantir replicabilidade da obtenção dos dados para outras unidades territoriais, dada a diversidade de fontes e tipos de dados</li>
</ul></dd>
<dd><ul>
<li>Dados de distâncias e tempos de viagem demandam interação com API’s do Google</li>
</ul></dd>
<dt>Limitações</dt>
<dd><ul>
<li>Dificuldade de obtenção programática de dados do DATASUS/CNES</li>
</ul></dd>
<dd><ul>
<li>Demanda por dados que ou não existem ou não estão ativamente disponíveis para acesso na internet</li>
</ul></dd>
<dt>Soluções</dt>
<dd><ul>
<li>Efetuar pedidos de acesso à informação</li>
</ul></dd>
<dd><ul>
<li>Obter dados do DATASUS/CNES manualmente</li>
</ul></dd>
<dd><ul>
<li>Estabelecer funções para obter dados do IBGE, para interagir com a Google Distance Matrix API, e para baixar qualquer arquivo comprimido em formato <code>zip</code>
</li>
</ul></dd>
</dl>
<div id="baixar-dados-com-get_zip" class="section level3">
<h3 class="hasAnchor">
<a href="#baixar-dados-com-get_zip" class="anchor"></a>Baixar dados com <code><a href="../reference/get_zip.html">get_zip()</a></code>
</h3>
<p>A função mais básica para obtenção de dados do pacote <code>asha</code> é a <code><a href="../reference/get_zip.html">get_zip()</a></code>. Ela é uma simples implementação conjunta das funções <code><a href="https://www.rdocumentation.org/packages/utils/topics/download.file">download.file()</a></code> e <code><a href="https://www.rdocumentation.org/packages/utils/topics/unzip">unzip()</a></code> do pacote <code>utils</code>, um dos <em>core R packages</em>. Portanto, além de baixar qualquer arquivo <code>.zip</code> da internet, ela também extrai os arquivos compactados. Além disso, a função dispõe de dois métodos para gerenciamento dos dados baixados.</p>
<p>O método básico é o temporário, caso em que os arquivos são locados no diretório temporário do sistema. O workflow deste método envolve o uso de duas outras funções, também disponibilizadas no pacote <code>asha</code>: <code><a href="../reference/list_tmp.html">list_tmp()</a></code> facilita a listagem dos arquivos na pasta temporária, aceitando padrões de busca, inclusive expressões regulares e <code><a href="../reference/clean_tmp.html">clean_tmp()</a></code> exclui o diretório temporário, caso seja preciso limpá-lo.</p>
<p>O segundo método é o arquivamento local dos dados. Neste caso, os arquivos são guardados no diretório indicado na função: <code><a href="../reference/get_zip.html">get_zip(savedir = "path")</a></code></p>
<p>No caso particular da investigação, esta função foi usada para obter os pontos geolocalizados das Unidades Básicas de Saúde, <em>shapefile</em> disponível no portal <a href="http://geosampa.prefeitura.sp.gov.br/PaginasPublicas/_SBC.aspx">Geosampa</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">url_base &lt;-<span class="st"> "http://geosampa.prefeitura.sp.gov.br/PaginasPublicas/downloadArquivoOL.aspx?"</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">url_arquivo &lt;-<span class="st"> "orig=DownloadCamadas&amp;arq=03_Equipamentos%5C%5CSa%FAde%5C%5CShapefile%5C%5CEQUIPAMENTOS_SHP_TEMA_SAUDE&amp;arqTipo=Shapefile"</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">url &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(url_base, url_arquivo)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw"><a href="../reference/get_zip.html">get_zip</a></span>(url)</a></code></pre></div>
<p>O resultado mostra que os dados foram corretamente baixados. Como não indiquei nenhum diretório de salvamento os dados estão na pasta temporária. Aqui é que entra a função <code><a href="../reference/list_tmp.html">list_tmp()</a></code>. Com ela eu posso listar os arquivos da pasta temporária.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>()</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt;  [1] "/tmp/RtmpXLaA8V/file54e21ebab702.zip"                                            </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;  [2] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.dbf"       </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;  [3] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shp"       </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;  [4] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shx"       </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;  [5] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_HOSPITAL.dbf"                          </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;  [6] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_HOSPITAL.shp"                          </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;  [7] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_HOSPITAL.shx"                          </span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;  [8] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.dbf"                      </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  [9] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shp"                      </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; [10] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shx"                      </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; [11] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.dbf"</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; [12] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; [13] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shx"</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; [14] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.dbf"                 </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; [15] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shp"                 </span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; [16] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shx"                 </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; [17] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.dbf"               </span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; [18] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shp"               </span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; [19] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shx"               </span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; [20] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.dbf"               </span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; [21] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shp"               </span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; [22] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shx"               </span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; [23] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.dbf"         </span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt; [24] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shp"         </span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; [25] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shx"         </span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt; [26] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_HOSPITAL.dbf"                            </span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt; [27] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_HOSPITAL.shp"                            </span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt; [28] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_HOSPITAL.shx"                            </span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; [29] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.dbf"                        </span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; [30] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shp"                        </span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt; [31] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shx"                        </span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; [32] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.dbf"  </span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; [33] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"  </span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"><span class="co">#&gt; [34] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shx"  </span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36"><span class="co">#&gt; [35] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.dbf"                   </span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37"><span class="co">#&gt; [36] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shp"                   </span></a>
<a class="sourceLine" id="cb4-38" data-line-number="38"><span class="co">#&gt; [37] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shx"                   </span></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co">#&gt; [38] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.dbf"                 </span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co">#&gt; [39] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shp"                 </span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41"><span class="co">#&gt; [40] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shx"                 </span></a>
<a class="sourceLine" id="cb4-42" data-line-number="42"><span class="co">#&gt; [41] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.dbf"                 </span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"><span class="co">#&gt; [42] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shp"                 </span></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="co">#&gt; [43] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shx"</span></a></code></pre></div>
<p>Além do arquivo baixado, que ganhou o nome temporário /tmp/RtmpXLaA8V/file54e21ebab702.zip, todos os arquivos que estavam compactados nele estão presentes, já descompactados.</p>
<p>É possível fazer buscas mais específicas. Por exemplo, para ver os arquivos <code>.shp</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># listar shapefiles</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>(<span class="st">"shp"</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;  [1] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shp"       </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;  [2] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_HOSPITAL.shp"                          </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;  [3] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shp"                      </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;  [4] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;  [5] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shp"                 </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt;  [6] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shp"               </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;  [7] "/tmp/RtmpXLaA8V/SAD69-96_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shp"               </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;  [8] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shp"         </span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;  [9] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_HOSPITAL.shp"                            </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; [10] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shp"                        </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; [11] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"  </span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; [12] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shp"                   </span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; [13] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shp"                 </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; [14] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shp"</span></a></code></pre></div>
<p>Ou para listar apenas o nome do arquivo e não o seu caminho completo:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>(<span class="st">"shp"</span>, <span class="dt">full =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt;  [1] "SAD69-96_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shp"       </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;  [2] "SAD69-96_SHP_TEMA_-_SAUDE_HOSPITAL.shp"                          </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;  [3] "SAD69-96_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shp"                      </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;  [4] "SAD69-96_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;  [5] "SAD69-96_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shp"                 </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  [6] "SAD69-96_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shp"               </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  [7] "SAD69-96_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shp"               </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  [8] "SIRGAS_SHP_TEMA_-_SAUDE_AMBULATORIOS_ESPECIALIZADOS.shp"         </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  [9] "SIRGAS_SHP_TEMA_-_SAUDE_HOSPITAL.shp"                            </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; [10] "SIRGAS_SHP_TEMA_-_SAUDE_SAUDE_MENTAL.shp"                        </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; [11] "SIRGAS_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"  </span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; [12] "SIRGAS_SHP_TEMA_-_SAUDE_UNIDADES_DST-AIDS.shp"                   </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; [13] "SIRGAS_SHP_TEMA_-_SAUDE_URGENCIA-EMERGENCIA.shp"                 </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; [14] "SIRGAS_SHP_TEMA_-_SAUDE_VIGILANCIA_EM_SAUDE.shp"</span></a></code></pre></div>
<p>Como o meu interesse é apenas no <em>shapefile</em> de UBS, e quero os dados projetados em Sirgas, posso usar expressões regulares e criar um padrão mais específico para extrair apenas o arquivo que desejo importar.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">arquivo &lt;-<span class="st"> </span><span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>(<span class="st">"SIRGAS*.*UBS*.*shp"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">arquivo</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; [1] "/tmp/RtmpXLaA8V/SIRGAS_SHP_TEMA_-_SAUDE_UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE.shp"</span></a></code></pre></div>
<p>E então importar:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sf)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">ubs_pontos &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_read">read_sf</a></span>(arquivo)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(ubs_pontos)</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; Observations: 455</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; Variables: 23</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; $ eq_cnes    &lt;chr&gt; "2788527", "3913007", "2091348", "2091321", "2752166"…</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; $ eq_enderec &lt;chr&gt; "R BANDEIRA DE ARACAMBI, 704", "AV DR ABRAAO RIBEIRO,…</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; $ eq_nome    &lt;chr&gt; "JD SAO FRANCISCO II - AMA/UBS INTEGRADA", "ALEXANDRE…</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; $ eq_bairro  &lt;chr&gt; "JD  SAO FRANCISCO", "BARRA FUNDA", "BUTANTA", "PACAE…</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; $ eq_cep     &lt;chr&gt; "08310010\n", "01133020\n", "05503000\n", "01246904\n…</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; $ eq_setcens &lt;chr&gt; "355030875000151", "355030806000026", "35503081200002…</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; $ eq_ar_pond &lt;chr&gt; "3550308005277", "3550308005029", "3550308005105", "3…</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; $ eq_cd_dist &lt;chr&gt; "75", "6", "12", "45", "1", "1", "1", "2", "3", "3", …</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; $ eq_distr   &lt;chr&gt; "SAO RAFAEL", "BARRA FUNDA", "BUTANTA", "JARDIM PAULI…</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt; $ eq_cd_subp &lt;chr&gt; "30", "08", "10", "11", "25", "25", "25", "11", "01",…</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co">#&gt; $ eq_subpref &lt;chr&gt; "SAO MATEUS", "LAPA", "BUTANTA", "PINHEIROS", "MOOCA"…</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="co">#&gt; $ eq_regiao5 &lt;chr&gt; "Leste", "Oeste", "Oeste", "Oeste", "Leste", "Leste",…</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="co">#&gt; $ eq_regiao8 &lt;chr&gt; "Leste 2", "Oeste", "Oeste", "Oeste", "Leste 1", "Les…</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="co">#&gt; $ eq_telefon &lt;chr&gt; "27516712", "34662502", "37267492", "30851134", "2605…</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="co">#&gt; $ eq_cd_esfe &lt;chr&gt; "01", "04", "02", "02", "01", "01", "01", "01", "01",…</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="co">#&gt; $ eq_esfera  &lt;chr&gt; "Municipal", "Privado", "Estadual", "Estadual", "Muni…</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co">#&gt; $ eq_cd_tipo &lt;chr&gt; "045", "018", "018", "018", "045", "045", "045", "045…</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="co">#&gt; $ eq_tipo    &lt;chr&gt; "UNIDADE BASICA DE SAUDE", "CENTRO DE SAUDE", "CENTRO…</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="co">#&gt; $ eq_classe  &lt;chr&gt; "UBS-POSTO_DE_SAUDE-CENTRO_DE_SAUDE", "UBS-POSTO_DE_S…</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co">#&gt; $ eq_leitos  &lt;chr&gt; "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"…</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co">#&gt; $ eq_cd_clas &lt;chr&gt; "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5"…</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">#&gt; $ eq_id      &lt;chr&gt; "206", "216", "217", "218", "445", "446", "447", "448…</span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29"><span class="co">#&gt; $ geometry   &lt;POINT&gt; POINT (351300 7385828), POINT (330613.5 7397760), P…</span></a></code></pre></div>
<p>Em resumo, o processo de importação deste arquivo, usando o método temporário, teria sido o seguinte:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># baixar o arquivp</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">url_base &lt;-<span class="st"> "http://geosampa.prefeitura.sp.gov.br/PaginasPublicas/downloadArquivoOL.aspx?"</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">url_arquivo &lt;-<span class="st"> "orig=DownloadCamadas&amp;arq=03_Equipamentos%5C%5CSa%FAde%5C%5CShapefile%5C%5CEQUIPAMENTOS_SHP_TEMA_SAUDE&amp;arqTipo=Shapefile"</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">url &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(url_base, url_arquivo)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw"><a href="../reference/get_zip.html">get_zip</a></span>(url)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co"># importar</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">ubs_pontos &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_read">read_sf</a></span>(<span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>(<span class="st">"SIRGAS*.*UBS*.*shp"</span>))</a></code></pre></div>
<p>Já usando o método de armazenamento local o processo, seria:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># baixar o arquivp</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">url_base &lt;-<span class="st"> "http://geosampa.prefeitura.sp.gov.br/PaginasPublicas/downloadArquivoOL.aspx?"</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">url_arquivo &lt;-<span class="st"> "orig=DownloadCamadas&amp;arq=03_Equipamentos%5C%5CSa%FAde%5C%5CShapefile%5C%5CEQUIPAMENTOS_SHP_TEMA_SAUDE&amp;arqTipo=Shapefile"</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">url &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(url_base, url_arquivo)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw"><a href="../reference/get_zip.html">get_zip</a></span>(url, <span class="dt">savedir =</span> <span class="st">"PATH DO ARQUIVO"</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co"># importar</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">ubs_pontos &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_read">read_sf</a></span>(<span class="st">"PATH DO ARQUIVO"</span>)</a></code></pre></div>
</div>
<div id="baixar-dados-com-get_censo" class="section level3">
<h3 class="hasAnchor">
<a href="#baixar-dados-com-get_censo" class="anchor"></a>Baixar dados com <code><a href="../reference/get_censo.html">get_censo()</a></code>
</h3>
<p>Já a função <code><a href="../reference/get_censo.html">get_censo()</a></code> é específica. Ela aplica a função <code><a href="../reference/get_zip.html">get_zip()</a></code> para baixar expecificamente os seguintes dados do Censo 2010:</p>
<ul>
<li>Resultados do universo agregados por setor censitário</li>
<li>Malhas digitais intramunicipais</li>
</ul>
<p>Os dados são baixados de <a href="ftp://ftp.ibge.gob.br" class="uri">ftp://ftp.ibge.gob.br</a> ou <a href="ftp://geoftp.ibge.gov.br" class="uri">ftp://geoftp.ibge.gov.br</a>. O primeiro disponibiliza os dados tabulares das pesquisas realizadas pelo IBGE. O segundo os dados espaciais produzidos pelo órgão, como as malhas digitais dos municípios, dos estados e dos setores censitários.</p>
<p>Dada a dimensão do município de São Paulo, seus arquivos são pesados. Por isto, exemplificarei o uso de <code><a href="../reference/get_censo.html">get_censo()</a></code> obtendo dados do estado de Roraima.</p>
<p><strong>Baixar dados tabulares</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># limpar diretório temporário</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># clean_tmp()</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co"># baixa dados</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="kw"><a href="../reference/get_censo.html">get_censo</a></span>(<span class="dt">state =</span> <span class="st">"rr"</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co"># importar</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6">file &lt;-<span class="st"> </span><span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>(<span class="st">"Dom*.*Renda*.*RR*.*csv"</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">rr_tabular &lt;-<span class="st"> </span>data.table<span class="op">::</span><span class="kw">fread</span>(file) <span class="op">%&gt;%</span><span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(rr_tabular)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; Observations: 824</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; Variables: 17</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; $ Cod_setor      &lt;S3: integer64&gt; 140002705000001, 140002705000002, 14000…</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; $ Situacao_setor &lt;int&gt; 1, 8, 8, 8, 5, 8, 8, 5, 8, 8, 8, 8, 8, 8, 8, 8, 8…</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; $ V001           &lt;chr&gt; "0", "0", "0", "0", "0", "X", "1", "0", "0", "X",…</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; $ V002           &lt;chr&gt; "461234", "52700", "2550", "50897", "19217", "X",…</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; $ V003           &lt;chr&gt; "461234", "52700", "2550", "50897", "19217", "X",…</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt; $ V004           &lt;chr&gt; "0", "0", "0", "0", "0", "X", "0", "0", "0", "X",…</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; $ V005           &lt;chr&gt; "11", "3", "0", "4", "5", "X", "2", "0", "2", "X"…</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt; $ V006           &lt;chr&gt; "35", "10", "0", "5", "5", "X", "8", "3", "2", "X…</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">#&gt; $ V007           &lt;chr&gt; "90", "13", "3", "19", "4", "X", "13", "11", "0",…</span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co">#&gt; $ V008           &lt;chr&gt; "96", "25", "0", "9", "9", "X", "9", "11", "0", "…</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21"><span class="co">#&gt; $ V009           &lt;chr&gt; "39", "7", "0", "4", "1", "X", "0", "4", "0", "X"…</span></a>
<a class="sourceLine" id="cb11-22" data-line-number="22"><span class="co">#&gt; $ V010           &lt;chr&gt; "12", "0", "0", "0", "0", "X", "1", "0", "0", "X"…</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23"><span class="co">#&gt; $ V011           &lt;chr&gt; "12", "0", "0", "2", "0", "X", "0", "0", "0", "X"…</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24"><span class="co">#&gt; $ V012           &lt;chr&gt; "4", "0", "0", "0", "0", "X", "0", "0", "0", "X",…</span></a>
<a class="sourceLine" id="cb11-25" data-line-number="25"><span class="co">#&gt; $ V013           &lt;chr&gt; "2", "0", "0", "1", "0", "X", "0", "0", "0", "X",…</span></a>
<a class="sourceLine" id="cb11-26" data-line-number="26"><span class="co">#&gt; $ V014           &lt;chr&gt; "8", "11", "2", "0", "18", "X", "27", "4", "9", "…</span></a>
<a class="sourceLine" id="cb11-27" data-line-number="27"><span class="co">#&gt; $ V17            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></a></code></pre></div>
<p><strong>Baixar dados espaciais</strong></p>
<p>Para baixar os dados espaciais (a malha de setores censitários), basta adicionar o argumento <code>mode</code> na função <code>getìbge()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># baixa dados</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="../reference/get_censo.html">get_censo</a></span>(<span class="dt">state =</span> <span class="st">"rr"</span>, <span class="dt">datatype =</span> <span class="st">"geo"</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co"># importar</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">file &lt;-<span class="st"> </span><span class="kw"><a href="../reference/list_tmp.html">list_tmp</a></span>(<span class="st">"SIR.shp"</span>)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">rr_geo &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_read">read_sf</a></span>(file)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(rr_geo)</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; Observations: 913</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; Variables: 14</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; $ ID         &lt;dbl&gt; 19274, 19275, 19276, 19277, 19278, 19279, 19280, 1928…</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; $ CD_GEOCODI &lt;chr&gt; "140002705000001", "140002705000002", "14000270500000…</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; $ TIPO       &lt;chr&gt; "URBANO", "RURAL", "RURAL", "RURAL", "RURAL", "RURAL"…</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; $ CD_GEOCODB &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; $ NM_BAIRRO  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; $ CD_GEOCODS &lt;chr&gt; "14000270500", "14000270500", "14000270500", "1400027…</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; $ NM_SUBDIST &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; $ CD_GEOCODD &lt;chr&gt; "140002705", "140002705", "140002705", "140002705", "…</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; $ NM_DISTRIT &lt;chr&gt; "AMAJARI", "AMAJARI", "AMAJARI", "AMAJARI", "AMAJARI"…</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; $ CD_GEOCODM &lt;chr&gt; "1400027", "1400027", "1400027", "1400027", "1400027"…</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt; $ NM_MUNICIP &lt;chr&gt; "AMAJARI", "AMAJARI", "AMAJARI", "AMAJARI", "AMAJARI"…</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt; $ NM_MICRO   &lt;chr&gt; "BOA VISTA", "BOA VISTA", "BOA VISTA", "BOA VISTA", "…</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt; $ NM_MESO    &lt;chr&gt; "NORTE DE RORAIMA", "NORTE DE RORAIMA", "NORTE DE ROR…</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; $ geometry   &lt;POLYGON [°]&gt; POLYGON ((-61.42608 3.65385..., POLYGON ((-61…</span></a></code></pre></div>
<p>Em qualquer um dos casos basta indicar o código de outra Unidade da Federação para baixar os dados de outro estado. O exemplo abaixo, por exemplo, baixaria os dados tabulares e as malhas de setores censitários de Santa Catarina</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># baixa dados tabulares</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw"><a href="../reference/get_censo.html">get_censo</a></span>(<span class="st">"sc"</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># baixa malha de setores censitários</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw"><a href="../reference/get_censo.html">get_censo</a></span>(<span class="st">"sc"</span>, <span class="st">"geo"</span>)</a></code></pre></div>
<p>Por fim, a função <code>get_censo</code> pode ser usada para baixar outras malhas intramunicipais. Para isto é preciso indicar no argumento <code>mesh</code>, aceito quando <code>datatype = "geo"</code>, qual delas será obtida. Por padrão a função baixa os setores censitários, mas também aceita os argumentos “distritos”, “municipios” e “sub_distritos”. Por exemplo, para baixar os distritos de Santa Catarina:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/get_censo.html">get_censo</a></span>(<span class="st">"sc"</span>, <span class="st">"geo"</span>, <span class="dt">mesh =</span> <span class="st">"distritos"</span>)</a></code></pre></div>
<p>O <a href="https://github.com/bruno-pinheiro/asha/blob/master/data-raw/00_get_data_raw.R">script de importação dos dados</a> utilizados na pesquisa em questão pode servir de exemplo para a obtenção dos dados.</p>
<p><strong>Obtenção de dados de outras fontes</strong></p>
<p>Uma informação essencial para a avaliação da acessibilidade do modelo territorial do sistema municipal de atenção básica em saúde é a delimitação territorial da cobertura das UBS. No caso da cidade de São Paulo, a Secretaria Municipal de Saúde dispunha de <em>shapefiles</em> utilizados na gestão, porém não disponibilizados à população. Por isto foi necessário impetrar um pedido de acesso à informação no <a href="http://esic.prefeitura.sp.gov.br/Account/Login.aspx">e-Sic da Prefeitura de São Paulo</a>. Além destes, os dados de saúde também foram obtidos manualmente junto ao DATASUS/CNES.</p>
<p><strong>Obtenção de dados da <em>Google Distance Matrix API</em></strong></p>
<p>Além destes conjuntos de dados já relacionados acima, a metodologia depende da obtenção de dados de rotas (tempos de viagem), para a modelagem da estrutra OD do sistema de atenção básica. Esta é uma das vantagens centrais adotadas na pesquisa e implementada no pacote <code>asha</code> por meio da função <code><a href="../reference/asha_dists.html">asha_dists()</a></code>, pois baseia a modelagem espacial no tempo efetivo da rota mais próxima entre os setores censitários e as UBS e não em distâncias euclidianas como muitos trabalhos na área adotam. Isto confere maior consitência aos indicadores espaciais.</p>
<p>Ainda que seja também uma função de obtenção de dados, ela será apresenta mais adiante. Como o objetivo desta vinheta é apresentar a aplicação da metodologia utilizando as funções do pacote <code>asha</code> de forma aplicada, esta função será apresentada na explicação sobre a modelagem da estrutura de sistema de atenção básica de saúde, mantendo-a no contexto da sua aplicação.</p>
</div>
</div>
</div>
<div id="passo-2-preparacao-dos-dados" class="section level1">
<h1 class="hasAnchor">
<a href="#passo-2-preparacao-dos-dados" class="anchor"></a>Passo 2: Preparação dos dados</h1>
<dl>
<dt>Problema</dt>
<dd><ul>
<li>Existência de variáveis desnecessárias</li>
</ul></dd>
<dd><ul>
<li>Classes de dados não padronizadas</li>
</ul></dd>
<dd><ul>
<li>Nomes das variáveis codificados, dificultando o uso</li>
</ul></dd>
<dd><ul>
<li>Malhas de UBS mais atual que geolocalização de pontos</li>
</ul></dd>
<dd><ul>
<li>Informações desatualizadas e inconsistens do CNES e da Prefeitura a respeito das UBS existentes no município</li>
</ul></dd>
<dd><ul>
<li>Dados mal documentados (metadados e variáveis)</li>
</ul></dd>
<dt>Solução</dt>
<dd><ul>
<li>Limpeza das variáveis não utilizadas</li>
</ul></dd>
<dd><ul>
<li>Recodificação das variáveis</li>
</ul></dd>
<dd><ul>
<li>Renomeação das variáveis</li>
</ul></dd>
<dd><ul>
<li>Geocodificação de endereços</li>
</ul></dd>
</dl>
<p>Após o processo de importação foi realizada a preparação dos dados, antes de proceder com a modelagem da acessibilidade espacial. Como em todo projeto de dados, esta é das mais importantes etapas, pois torna todo o trabalho posterior mais fácil e organizado. Mas é a que mais consome tempo, pois implica conhecer os dados, suas variáveis, a interrelação entre os conjuntos de dados, e definir meios de solucionar problemas que se apresentem no processo cíclico de pre-processamento.</p>
<p>Particularmente, as maiores dificuldades encontradas foram relacionadas à definição das UBS existentes, em função de informações desatualizadas e erros de geolocalização. Isto demandou uma série de explorações nos dados, consulta ao órgão municipal de saúde e cruzamento de informações da Prefeitura e do CNES.</p>
<p>Após a identificação das UBS em atividade aquelas que não existiam na base de pontos, bastou geocodificar As coordenadas espaciais foram obtidas com a <a href="https://developers.google.com/maps/documentation/geocoding/intro"><em>Google Geocoding API</em></a> por meio da função <code>geocode</code> do pacote <code>ggmap</code>, que estabelece interface com a API.</p>
<p>A parte computacional deste procedimento é simples:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># separar amostra de enderecos</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">enderecos &lt;-<span class="st"> </span>ubs_malha<span class="op">$</span>endereco[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">enderecos</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; [1] "R. ADÃO MANOEL DA SILVA, 16 C, CEP 08072180"</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; [2] "R. PASQUALE GUALUPPI, 951, CEP 05660000"    </span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; [3] "R. MELCHIOR GIOLA, 80, CEP 05664000"        </span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; [4] "R. SILVEIRA SAMPAIO, 660, CEP 05656010"     </span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; [5] "R. FRANCISCO SOARES, 81, CEP 05774300"</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co"># geolocalizar</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggmap)</a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/ggmap/topics/geocode">geocode</a></span>(enderecos)</a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt;     lon   lat</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt; 1 -48.6 -27.6</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; 2 -46.7 -23.6</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt; 3 -46.7 -23.6</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt; 4 -46.7 -23.6</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt; 5 -46.7 -23.6</span></a></code></pre></div>
<p>Depois de finalizado, quando estabelecidas as linhas OD da malha territorial vigente, percebi que havia algumas UBS (15 ao todo) com erros graves de geolocalização. Foi então realizada mais uma rodada de consulta aos endereços destas UBS nos sites da Prefeitura e do CNES para conferência de endereços. Após obtenção dos endereços corretos eles foram geocodificados e os pontos incosistentes corrigidos.</p>
<p>Todo do processo de tratament dos dados está nos scripts presentes podem ser visto <a href="https://github.com/bruno-pinheiro/asha/tree/master/data-raw">aqui</a>. Ao fim, foram geradas as seguintes bases de dados.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rm">rm</a></span>(<span class="dt">list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ls">ls</a></span>())</a></code></pre></div>
<div id="dados-pre-processados" class="section level2">
<h2 class="hasAnchor">
<a href="#dados-pre-processados" class="anchor"></a>Dados pré-processados</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># dados tabulares</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(populacao)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 5</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt;   cd_geocodi      habitantes homens mulheres renda_domicilios</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; 1 355030801000001        806    378      428 907777          </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; 2 355030801000002        913    418      495 846525          </span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt; 3 355030801000003        625    296      329 505662          </span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt; 4 355030801000004        572    276      296 446011          </span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; 5 355030801000005        754    355      399 615215          </span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; 6 355030801000006        643    312      331 507028</span></a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(prof_saude)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">#&gt;   cnes    enfermeiros medicos</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;         &lt;int&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt; 1 2751844           8      50</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt; 2 2751879           4      23</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt; 3 2751887           6      16</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; 4 4050312          10      32</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt; 5 3913007          10     156</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt; 6 2091348           3      15</span></a></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># dados espaciais</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(setores)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="co">#&gt; Simple feature collection with 6 features and 4 fields</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt; bbox:           xmin: 343671.5 ymin: 7391134 xmax: 345114.6 ymax: 7392296</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt; epsg (SRID):    31983</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt; proj4string:    +proj=utm +zone=23 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt; # A tibble: 6 x 5</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt;   cd_geocodi  tipo  cd_geocodd nm_distrit                          geometry</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;                     &lt;MULTIPOLYGON [m]&gt;</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">#&gt; 1 3550308040… URBA… 355030804  ARICANDUVA (((345114.6 7391510, 345106.8 73…</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">#&gt; 2 3550308040… URBA… 355030804  ARICANDUVA (((345002.9 7391487, 344983.1 73…</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt; 3 3550308040… URBA… 355030804  ARICANDUVA (((344874.9 7391333, 344864.2 73…</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt; 4 3550308040… URBA… 355030804  ARICANDUVA (((344746.1 7391457, 344742.5 73…</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">#&gt; 5 3550308040… URBA… 355030804  ARICANDUVA (((344512.4 7391240, 344500.2 73…</span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#&gt; 6 3550308040… URBA… 355030804  ARICANDUVA (((344106.5 7392083, 344105.8 73…</span></a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ubs_pontos)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="co">#&gt; Simple feature collection with 6 features and 1 field</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="co">#&gt; geometry type:  POINT</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt; bbox:           xmin: 324795.4 ymin: 7385828 xmax: 351300 ymax: 7397760</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt; epsg (SRID):    31983</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt; proj4string:    +proj=utm +zone=23 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">#&gt;   cnes              geometry</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">#&gt;   &lt;chr&gt;          &lt;POINT [m]&gt;</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; 1 2788527   (351300 7385828)</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">#&gt; 2 3913007 (330613.5 7397760)</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">#&gt; 3 2091348 (324795.4 7392496)</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">#&gt; 4 2091321 (329183.6 7394216)</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#&gt; 5 2752166 (338737.3 7394267)</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">#&gt; 6 2752344 (339203.5 7392421)</span></a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ubs_malha)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co">#&gt; Simple feature collection with 6 features and 5 fields</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="co">#&gt; geometry type:  GEOMETRY</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#&gt; bbox:           xmin: 320720.4 ymin: 7384008 xmax: 351580 ymax: 7402907</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">#&gt; epsg (SRID):    31983</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt; proj4string:    +proj=utm +zone=23 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt;      cnes                                 nomeubs         sts   crs</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt; 1 2819856 UBS UNIÃO DE VILA NOVA II - ADÃO MANOEL  SAO MIGUEL LESTE</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt; 2 3956954                     UBS PARAISOPOLIS II CAMPO LIMPO   SUL</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt; 3 2788187                        UBS PARAISOPOLIS CAMPO LIMPO   SUL</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#&gt; 4 6564410                    UBS PARAISOPOLIS III CAMPO LIMPO   SUL</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt; 5 2788268             UBS PARQUE ARARIBA - CEO II CAMPO LIMPO   SUL</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14"><span class="co">#&gt; 6 6329527                   UBS JARDIM DAS PALMAS CAMPO LIMPO   SUL</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">#&gt;                                      endereco</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16"><span class="co">#&gt; 1 R. ADÃO MANOEL DA SILVA, 16 C, CEP 08072180</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="co">#&gt; 2     R. PASQUALE GUALUPPI, 951, CEP 05660000</span></a>
<a class="sourceLine" id="cb21-18" data-line-number="18"><span class="co">#&gt; 3         R. MELCHIOR GIOLA, 80, CEP 05664000</span></a>
<a class="sourceLine" id="cb21-19" data-line-number="19"><span class="co">#&gt; 4      R. SILVEIRA SAMPAIO, 660, CEP 05656010</span></a>
<a class="sourceLine" id="cb21-20" data-line-number="20"><span class="co">#&gt; 5       R. FRANCISCO SOARES, 81, CEP 05774300</span></a>
<a class="sourceLine" id="cb21-21" data-line-number="21"><span class="co">#&gt; 6     R. FRANCISCO DE SALES, 10, CEP 05749280</span></a>
<a class="sourceLine" id="cb21-22" data-line-number="22"><span class="co">#&gt;                         geometry</span></a>
<a class="sourceLine" id="cb21-23" data-line-number="23"><span class="co">#&gt; 1 POLYGON ((351580 7401277, 3...</span></a>
<a class="sourceLine" id="cb21-24" data-line-number="24"><span class="co">#&gt; 2 MULTIPOLYGON (((324101.6 73...</span></a>
<a class="sourceLine" id="cb21-25" data-line-number="25"><span class="co">#&gt; 3 MULTIPOLYGON (((323313.7 73...</span></a>
<a class="sourceLine" id="cb21-26" data-line-number="26"><span class="co">#&gt; 4 MULTIPOLYGON (((323340.4 73...</span></a>
<a class="sourceLine" id="cb21-27" data-line-number="27"><span class="co">#&gt; 5 MULTIPOLYGON (((323327.6 73...</span></a>
<a class="sourceLine" id="cb21-28" data-line-number="28"><span class="co">#&gt; 6 MULTIPOLYGON (((322079.5 73...</span></a></code></pre></div>
</div>
</div>
<div id="modelagem-od" class="section level1">
<h1 class="hasAnchor">
<a href="#modelagem-od" class="anchor"></a>Modelagem OD</h1>
<p>OD euclidiano</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">centroides &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/geos_unary">st_centroid</a></span>(setores) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(cd_geocodi)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">od_euclidiano &lt;-<span class="st"> </span><span class="kw"><a href="../reference/asha_nn.html">asha_nn</a></span>(ubs_pontos, centroides, <span class="st">"cnes"</span>, <span class="st">"cd_geocodi"</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">od_euclidiano</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co">#&gt; # A tibble: 94,765 x 4</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="co">#&gt;    cd_geocodi      cnes    proximidade distancia</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;         &lt;int&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="co">#&gt;  1 355030804000079 2787490           1      429.</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="co">#&gt;  2 355030804000080 2787490           1      523.</span></a>
<a class="sourceLine" id="cb22-9" data-line-number="9"><span class="co">#&gt;  3 355030804000081 2787490           1      551.</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10"><span class="co">#&gt;  4 355030804000082 2788942           1      614.</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11"><span class="co">#&gt;  5 355030804000083 2788942           1      429.</span></a>
<a class="sourceLine" id="cb22-12" data-line-number="12"><span class="co">#&gt;  6 355030804000084 2788942           1      649.</span></a>
<a class="sourceLine" id="cb22-13" data-line-number="13"><span class="co">#&gt;  7 355030804000085 4049799           1      465.</span></a>
<a class="sourceLine" id="cb22-14" data-line-number="14"><span class="co">#&gt;  8 355030804000086 4049799           1      637.</span></a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="co">#&gt;  9 355030804000087 2789124           1      568.</span></a>
<a class="sourceLine" id="cb22-16" data-line-number="16"><span class="co">#&gt; 10 355030804000088 2789124           1      549.</span></a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="co">#&gt; # … with 94,755 more rows</span></a></code></pre></div>
<p>Isto sigfica identificar as “n” UBS mais proximas de cada setor censitario. No caso estamos trabalhando com as 5 UBS mais proximas.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># Preparar base de zonas ---------------</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2">zonas &lt;-<span class="st"> </span><span class="kw"><a href="../reference/asha_zones.html">asha_zones</a></span>(centroides, ubs_pontos, <span class="st">"cd_geocodi"</span>, <span class="st">"cnes"</span>)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(zonas)</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="co">#&gt; Simple feature collection with 6 features and 2 fields</span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="co">#&gt; geometry type:  POINT</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="co">#&gt; bbox:           xmin: 343921.6 ymin: 7391216 xmax: 345013.3 ymax: 7392131</span></a>
<a class="sourceLine" id="cb23-8" data-line-number="8"><span class="co">#&gt; epsg (SRID):    31983</span></a>
<a class="sourceLine" id="cb23-9" data-line-number="9"><span class="co">#&gt; proj4string:    +proj=utm +zone=23 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb23-10" data-line-number="10"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb23-11" data-line-number="11"><span class="co">#&gt;   id              tipo                 geometry</span></a>
<a class="sourceLine" id="cb23-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;             &lt;POINT [m]&gt;</span></a>
<a class="sourceLine" id="cb23-13" data-line-number="13"><span class="co">#&gt; 1 355030804000079 cd_geocodi (345013.3 7391354)</span></a>
<a class="sourceLine" id="cb23-14" data-line-number="14"><span class="co">#&gt; 2 355030804000080 cd_geocodi (344882.7 7391371)</span></a>
<a class="sourceLine" id="cb23-15" data-line-number="15"><span class="co">#&gt; 3 355030804000081 cd_geocodi (344779.2 7391291)</span></a>
<a class="sourceLine" id="cb23-16" data-line-number="16"><span class="co">#&gt; 4 355030804000082 cd_geocodi   (344635 7391342)</span></a>
<a class="sourceLine" id="cb23-17" data-line-number="17"><span class="co">#&gt; 5 355030804000083 cd_geocodi (344366.9 7391216)</span></a>
<a class="sourceLine" id="cb23-18" data-line-number="18"><span class="co">#&gt; 6 355030804000084 cd_geocodi (343921.6 7392131)</span></a>
<a class="sourceLine" id="cb23-19" data-line-number="19"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">tail</a></span>(zonas)</a>
<a class="sourceLine" id="cb23-20" data-line-number="20"><span class="co">#&gt; Simple feature collection with 6 features and 2 fields</span></a>
<a class="sourceLine" id="cb23-21" data-line-number="21"><span class="co">#&gt; geometry type:  POINT</span></a>
<a class="sourceLine" id="cb23-22" data-line-number="22"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb23-23" data-line-number="23"><span class="co">#&gt; bbox:           xmin: 321895.2 ymin: 7357235 xmax: 343578.5 ymax: 7398762</span></a>
<a class="sourceLine" id="cb23-24" data-line-number="24"><span class="co">#&gt; epsg (SRID):    31983</span></a>
<a class="sourceLine" id="cb23-25" data-line-number="25"><span class="co">#&gt; proj4string:    +proj=utm +zone=23 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb23-26" data-line-number="26"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb23-27" data-line-number="27"><span class="co">#&gt;   id      tipo            geometry</span></a>
<a class="sourceLine" id="cb23-28" data-line-number="28"><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;        &lt;POINT [m]&gt;</span></a>
<a class="sourceLine" id="cb23-29" data-line-number="29"><span class="co">#&gt; 1 5731143 cnes  (331804.9 7380997)</span></a>
<a class="sourceLine" id="cb23-30" data-line-number="30"><span class="co">#&gt; 2 6018912 cnes    (322675 7357918)</span></a>
<a class="sourceLine" id="cb23-31" data-line-number="31"><span class="co">#&gt; 3 6194990 cnes  (343578.5 7398762)</span></a>
<a class="sourceLine" id="cb23-32" data-line-number="32"><span class="co">#&gt; 4 6329527 cnes  (321895.2 7386516)</span></a>
<a class="sourceLine" id="cb23-33" data-line-number="33"><span class="co">#&gt; 5 6332420 cnes    (331979 7358334)</span></a>
<a class="sourceLine" id="cb23-34" data-line-number="34"><span class="co">#&gt; 6 6332471 cnes  (323707.7 7357235)</span></a></code></pre></div>
<div id="levantar-rotas" class="section level2">
<h2 class="hasAnchor">
<a href="#levantar-rotas" class="anchor"></a>Levantar Rotas</h2>
<p>O levantamento de dados de rotas consiste na consulta à Google Distance Matrix API para obtenção de dados de rotas (distancia e tempo de viagem) entre as 94765 conexões de origem e destino criadas em <code>od_euclidiano</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">## Levantar dados de rotas ---------------</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="co"># Esta etapa demora muito. Mais de um dia.</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3">od_euclidiano_exemplo &lt;-<span class="st"> </span>od_euclidiano[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, ]</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">zonas_exemplo &lt;-<span class="st"> </span>zonas <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(id <span class="op">%in%</span><span class="st"> </span>od_euclidiano_exemplo<span class="op">$</span>cnes <span class="op">|</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="st">           </span>id <span class="op">%in%</span><span class="st"> </span>od_euclidiano_exemplo<span class="op">$</span>cd_geocodi)</a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="../reference/asha_dists.html">asha_dists</a></span>(od_euclidiano_exemplo, zonas_exemplo, <span class="dt">api =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"GOOGLEDIST"</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="co">#&gt;                                                                                         de</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="co">#&gt; 1                       Tv. Ocaso do Mar, 8 - Vila rica, São Paulo - SP, 03911-155, Brazil</span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="co">#&gt; 2                   R. Padre Miguelinho, 29 - Vila rica, São Paulo - SP, 03912-020, Brazil</span></a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="co">#&gt; 3                 R. João Jacinto Silva, 84 - Vila rica, São Paulo - SP, 03912-240, Brazil</span></a>
<a class="sourceLine" id="cb25-6" data-line-number="6"><span class="co">#&gt; 4                   R. Bartolomeu Abril, 66 - Vila rica, São Paulo - SP, 03912-180, Brazil</span></a>
<a class="sourceLine" id="cb25-7" data-line-number="7"><span class="co">#&gt; 5 Rua Isabel Garcia Marques, 139 - Parque Santo Antonio, São Paulo - SP, 03385-120, Brazil</span></a>
<a class="sourceLine" id="cb25-8" data-line-number="8"><span class="co">#&gt;                                                                            para</span></a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="co">#&gt; 1 R. Miguel Bastos Soares, 365 - Jardim Nice, São Paulo - SP, 03910-000, Brazil</span></a>
<a class="sourceLine" id="cb25-10" data-line-number="10"><span class="co">#&gt; 2 R. Miguel Bastos Soares, 365 - Jardim Nice, São Paulo - SP, 03910-000, Brazil</span></a>
<a class="sourceLine" id="cb25-11" data-line-number="11"><span class="co">#&gt; 3 R. Miguel Bastos Soares, 365 - Jardim Nice, São Paulo - SP, 03910-000, Brazil</span></a>
<a class="sourceLine" id="cb25-12" data-line-number="12"><span class="co">#&gt; 4    Rua Terezinha, 140 - Chácara Belenzinho, São Paulo - SP, 03382-160, Brazil</span></a>
<a class="sourceLine" id="cb25-13" data-line-number="13"><span class="co">#&gt; 5    Rua Terezinha, 140 - Chácara Belenzinho, São Paulo - SP, 03382-160, Brazil</span></a>
<a class="sourceLine" id="cb25-14" data-line-number="14"><span class="co">#&gt;   distancias tempo moeda tarifa</span></a>
<a class="sourceLine" id="cb25-15" data-line-number="15"><span class="co">#&gt; 1        503   339    NA     NA</span></a>
<a class="sourceLine" id="cb25-16" data-line-number="16"><span class="co">#&gt; 2        785   564    NA     NA</span></a>
<a class="sourceLine" id="cb25-17" data-line-number="17"><span class="co">#&gt; 3        774   584    NA     NA</span></a>
<a class="sourceLine" id="cb25-18" data-line-number="18"><span class="co">#&gt; 4       1123   958    NA     NA</span></a>
<a class="sourceLine" id="cb25-19" data-line-number="19"><span class="co">#&gt; 5        671   587    NA     NA</span></a></code></pre></div>
</div>
</div>
<div id="gerar-os-indicadores" class="section level1">
<h1 class="hasAnchor">
<a href="#gerar-os-indicadores" class="anchor"></a>Gerar os indicadores</h1>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">## od_indicadores da malha vigente -------------------------------------------------------------</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">od_indicadores &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">vigente =</span> asha<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/asha/topics/asha_intersect">asha_intersect</a></span>(ubs_malha, centroides, <span class="st">"cnes"</span>, <span class="st">"cd_geocodi"</span>))</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="co">#' O resultado tem 18948 setores, de 18953. Os cinco nao incluidos</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co">#' nao estao dentro de nenhuma area de ubs, por diferencas na geometria.</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="co">#' Abaixo incluo diretamente as linhas com os setores ausentes. Busquei</span></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co">#' no mapa as UBS correspondentes.</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"></a>
<a class="sourceLine" id="cb26-9" data-line-number="9">cd_setores &lt;-<span class="st"> </span>setores<span class="op">$</span>cd_geocodi[<span class="op">!</span>(setores<span class="op">$</span>cd_geocodi <span class="op">%in%</span><span class="st"> </span>od_indicadores<span class="op">$</span>vigente<span class="op">$</span>cd_geocodi)]</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">cd_ubs &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"3121135"</span>, <span class="st">"4049934"</span>, <span class="st">"2788039"</span>, <span class="st">"2788217"</span>, <span class="st">"2788500"</span>)</a>
<a class="sourceLine" id="cb26-11" data-line-number="11"></a>
<a class="sourceLine" id="cb26-12" data-line-number="12">od_indicadores<span class="op">$</span>vigente &lt;-<span class="st"> </span>od_indicadores<span class="op">$</span>vigente <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">cd_geocodi =</span> cd_setores, <span class="dt">cnes =</span> cd_ubs)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-14" data-line-number="14"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">malha =</span> <span class="st">"vigente"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-15" data-line-number="15"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb26-16" data-line-number="16"></a>
<a class="sourceLine" id="cb26-17" data-line-number="17">## od_indicadores da malha experimental --------------------------------------------------------</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">od_indicadores<span class="op">$</span>prox &lt;-<span class="st"> </span>od_viagens <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-19" data-line-number="19"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(cd_geocodi) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-20" data-line-number="20"><span class="st">  </span><span class="co"># ha menor tempo com distancia igual</span></a>
<a class="sourceLine" id="cb26-21" data-line-number="21"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(tempo <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">min</a></span>(tempo)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-22" data-line-number="22"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(distancias <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">min</a></span>(distancias)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-23" data-line-number="23"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-24" data-line-number="24"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(cd_geocodi, cnes) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-25" data-line-number="25"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">malha =</span> <span class="st">"experimento"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-26" data-line-number="26"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb26-27" data-line-number="27"></a>
<a class="sourceLine" id="cb26-28" data-line-number="28"><span class="co"># Extrair setores ausentes</span></a>
<a class="sourceLine" id="cb26-29" data-line-number="29">cd_setores &lt;-<span class="st"> </span>setores<span class="op">$</span>cd_geocodi[<span class="op">!</span>(setores<span class="op">$</span>cd_geocodi <span class="op">%in%</span><span class="st"> </span>od_indicadores<span class="op">$</span>prox<span class="op">$</span>cd_geocodi)]</a>
<a class="sourceLine" id="cb26-30" data-line-number="30">od_euclidiano &lt;-<span class="st"> </span>asha<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/asha/topics/asha_nn">asha_nn</a></span>(ubs_pontos, centroides, <span class="st">"cnes"</span>, <span class="st">"cd_geocodi"</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb26-31" data-line-number="31"></a>
<a class="sourceLine" id="cb26-32" data-line-number="32"><span class="co"># terminar od_indicadores da malha experimental</span></a>
<a class="sourceLine" id="cb26-33" data-line-number="33">od_indicadores<span class="op">$</span>prox &lt;-<span class="st"> </span>od_indicadores<span class="op">$</span>prox <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-34" data-line-number="34"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(od_euclidiano <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-35" data-line-number="35"><span class="st">          </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(proximidade <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, cd_geocodi <span class="op">%in%</span><span class="st"> </span>cd_setores) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-36" data-line-number="36"><span class="st">          </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(cd_geocodi, cnes) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-37" data-line-number="37"><span class="st">          </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">malha =</span> <span class="st">"experimento"</span>))</a>
<a class="sourceLine" id="cb26-38" data-line-number="38"></a>
<a class="sourceLine" id="cb26-39" data-line-number="39"></a>
<a class="sourceLine" id="cb26-40" data-line-number="40"><span class="co"># UNIR BASES od_indicadores ---------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb26-41" data-line-number="41">od_indicadores &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/do.call">do.call</a></span>(rbind, od_indicadores) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-42" data-line-number="42"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">malha =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(malha, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"vigente"</span>, <span class="st">"experimento"</span>)))</a>
<a class="sourceLine" id="cb26-43" data-line-number="43"></a>
<a class="sourceLine" id="cb26-44" data-line-number="44">od_indicadores &lt;-<span class="st"> </span>od_indicadores <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-45" data-line-number="45"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(populacao, <span class="dt">by =</span> <span class="st">"cd_geocodi"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-46" data-line-number="46"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(prof_saude, <span class="dt">by =</span> <span class="st">"cnes"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-47" data-line-number="47"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">oportunidades =</span> enfermeiros <span class="op">+</span><span class="st"> </span>medicos,</a>
<a class="sourceLine" id="cb26-48" data-line-number="48">         <span class="dt">habitantes =</span> tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span>(habitantes, <span class="dv">0</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-49" data-line-number="49"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(cnes) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-50" data-line-number="50"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">demanda =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(habitantes, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-51" data-line-number="51"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-52" data-line-number="52"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(od_viagens[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"cnes"</span>, <span class="st">"cd_geocodi"</span>, <span class="st">"distancias"</span>, <span class="st">"tempo"</span>)],</a>
<a class="sourceLine" id="cb26-53" data-line-number="53">            <span class="dt">by =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"cd_geocodi"</span>, <span class="st">"cnes"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-54" data-line-number="54"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">distancia =</span> distancias)</a>
<a class="sourceLine" id="cb26-55" data-line-number="55"></a>
<a class="sourceLine" id="cb26-56" data-line-number="56"><span class="co"># CALCULAR INDICADORES --------------------------------------------------------</span></a>
<a class="sourceLine" id="cb26-57" data-line-number="57"></a>
<a class="sourceLine" id="cb26-58" data-line-number="58">## Acessibilidade viável -------------</a>
<a class="sourceLine" id="cb26-59" data-line-number="59">od_indicadores &lt;-<span class="st"> </span>asha<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/asha/topics/asha_av">asha_av</a></span>(od_indicadores, cnes, tempo, habitantes, malha, <span class="dv">15</span>)</a>
<a class="sourceLine" id="cb26-60" data-line-number="60"></a>
<a class="sourceLine" id="cb26-61" data-line-number="61">## Acessibilidade competitiva -------------</a>
<a class="sourceLine" id="cb26-62" data-line-number="62">od_indicadores &lt;-<span class="st"> </span>asha<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/asha/topics/asha_ac">asha_ac</a></span>(od_indicadores, habitantes, cnes, malha, <span class="dv">1000</span>)</a></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(od_indicadores)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 17</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="co">#&gt;   cd_geocodi cnes  malha habitantes homens mulheres renda_domicilios</span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;fct&gt;      &lt;dbl&gt;  &lt;int&gt;    &lt;int&gt; &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"><span class="co">#&gt; 1 355030828… 2819… vige…          0     NA       NA &lt;NA&gt;            </span></a>
<a class="sourceLine" id="cb27-6" data-line-number="6"><span class="co">#&gt; 2 355030828… 2819… vige…         21      7       14 12250           </span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7"><span class="co">#&gt; 3 355030887… 2819… vige…        972    476      496 322806          </span></a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="co">#&gt; 4 355030887… 2819… vige…        394    194      200 134760          </span></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="co">#&gt; 5 355030887… 2819… vige…        380    202      178 100284          </span></a>
<a class="sourceLine" id="cb27-10" data-line-number="10"><span class="co">#&gt; 6 355030887… 2819… vige…        424    210      214 186868          </span></a>
<a class="sourceLine" id="cb27-11" data-line-number="11"><span class="co">#&gt; # … with 10 more variables: enfermeiros &lt;int&gt;, medicos &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb27-12" data-line-number="12"><span class="co">#&gt; #   oportunidades &lt;int&gt;, demanda &lt;dbl&gt;, distancia &lt;int&gt;, tempo &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb27-13" data-line-number="13"><span class="co">#&gt; #   minutos &lt;dbl&gt;, av &lt;chr&gt;, av_prop &lt;dbl&gt;, ac &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Estudante do curso de Gestão de Políticas Públicas da EACH/USP<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Professor do curso de Gestão de Políticas Públicas da EACH/USP<a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introducao">Introdução</a></li>
      <li><a href="#objetivos">Objetivos</a></li>
      <li><a href="#estrutura-do-pacote-e-funcionalidade">Estrutura do pacote e funcionalidade</a></li>
      <li><a href="#funcionalidades-centrais-do-asha">Funcionalidades centrais do <code>asha</code></a></li>
      <li>
<a href="#passo-1-obtencao-dos-dados">Passo 1: Obtenção dos dados</a><ul class="nav nav-pills nav-stacked">
<li><a href="#dados-fundamentais">Dados fundamentais</a></li>
      <li><a href="#baixar-os-dados">Baixar os dados</a></li>
      </ul>
</li>
      <li>
<a href="#passo-2-preparacao-dos-dados">Passo 2: Preparação dos dados</a><ul class="nav nav-pills nav-stacked">
<li><a href="#dados-pre-processados">Dados pré-processados</a></li>
      </ul>
</li>
      <li>
<a href="#modelagem-od">Modelagem OD</a><ul class="nav nav-pills nav-stacked">
<li><a href="#levantar-rotas">Levantar Rotas</a></li>
      </ul>
</li>
      <li><a href="#gerar-os-indicadores">Gerar os indicadores</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Bruno Pinheiro.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
